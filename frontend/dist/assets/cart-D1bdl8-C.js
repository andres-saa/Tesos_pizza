import{r as B}from"./resumen-pIzJQ5gg.js";import{k,b as P,u as U,y as q,G as T,l as F,o as a,c as l,f as c,w as j,e,g as i,s as y,F as b,q as x,t as h,H as E,j as A,v as w,E as N,n as G,I,_ as L,J as D,U as H,D as J,i as K,K as M}from"./index-3TSIe7Kj.js";const O={style:{color:"black"},class:"grid"},R={class:"mb-2"},Q={class:"mb-2 text-center"},W={class:"mt-2"},X={key:0,class:"p-0",style:{display:"flex",width:"100%",gap:"1rem"}},Y={style:{display:"flex",width:"100%",gap:"1rem","justify-content":"space-between"}},Z={class:"text-sm adicion",style:{"text-transform":"capitalize"}},ee={key:0,style:{display:"flex","align-items":"center"}},te={key:0,class:"pl-2 py-1 text-sm"},ie={key:1,class:"pl-2 py-1 text-sm"},se={class:"col-12 p-0",style:{display:"flex","justify-content":"center","font-weight":"bold"}},ne={__name:"dialogAddAditions",setup(z){const s=k({});P();const _=U(),V=(n,r)=>{if(n.checked){const m={id:n.aditional_item_instance_id,name:n.aditional_item_name,price:n.aditional_item_price,group:r};s.value[m.id]={...m,quantity:n.quantity||1}}else delete s.value[n.aditional_item_instance_id]},C=n=>{if(n.checked){const r={id:n.aditional_item_instance_id,name:n.aditional_item_name,price:n.aditional_item_price};s.value[r.id].quantity++}},S=n=>{s.value[n.aditional_item_instance_id].quantity>1&&s.value[n.aditional_item_instance_id]&&s.value[n.aditional_item_instance_id].quantity--};q(()=>_.visibles.addAdditionToCart,async n=>{if(!n)s.value={},f.value=[];else{const r=_.cart.products.map(m=>m.product.id);r.length>0&&(f.value=await T.getAditionalGroup(r,31))}},{deep:!0});const $=()=>{Object.values(s.value).forEach(r=>{_.addAdditionToCart(r),console.log(r)}),s.value={},_.setVisible("addAdditionToCart",!1)},f=k([]);return k(!0),F(async()=>{const n=_.cart.products.map(r=>r.product.id);n.length>0&&(f.value=await T.getAditionalGroup(n,31))}),(n,r)=>(a(),l("div",null,[c(i(I),{class:"mx-3",closable:!0,style:G([{"background-color":"white"},{width:"30rem","border-radius":"0.5rem"}]),visible:i(_).visibles.addAdditionToCart,"onUpdate:visible":r[1]||(r[1]=m=>i(_).visibles.addAdditionToCart=m),modal:"",header:"Header"},{footer:j(()=>[e("div",se,[c(i(y),{onClick:$,style:{width:"auto"},severity:"danger",label:"Agregar al carrito"})])]),default:j(()=>[e("div",O,[(a(!0),l(b,null,x(f.value,m=>(a(),l("div",{class:"col-12",style:{},key:m.category},[e("div",R,[e("span",Q,[e("b",null,h(m.category),1)]),e("div",W,[(a(!0),l(b,null,x(m.items,u=>{var d,o;return a(),l("div",{key:u.aditional_item_instance_id,style:{display:"flex",gap:"1rem"}},[i(_).cart.products.some(t=>t.product.category_name==u.product_category_name)?(a(),l("div",X,[c(i(E),{class:"my-1",binary:!0,modelValue:u.checked,"onUpdate:modelValue":t=>u.checked=t,onChange:()=>V(u,m.category)},null,8,["modelValue","onUpdate:modelValue","onChange"]),e("div",Y,[e("span",Z,h(u.aditional_item_name),1),u.checked&&m.category!="SALSAS"?(a(),l("span",ee,[u.aditional_item_price>0?(a(),l("span",te,[e("b",null,h(i(A)(u.aditional_item_price*((d=s.value[u.aditional_item_instance_id])==null?void 0:d.quantity))),1)])):w("",!0),c(i(y),{onClick:t=>S(u),class:"ml-2",severity:"danger",style:{width:"2rem",height:"1.5rem",border:"none"},icon:"pi pi-minus"},null,8,["onClick"]),c(i(N),{modelValue:(o=s.value[u.aditional_item_instance_id])==null?void 0:o.quantity,readonly:"",style:{width:"2rem",border:"none",height:"1.5rem"},class:"p-0 text-center"},null,8,["modelValue"]),c(i(y),{onClick:t=>C(u),severity:"danger",style:{width:"2rem",height:"1.5rem",border:"none"},icon:"pi pi-plus"},null,8,["onClick"])])):u.aditional_item_price>0?(a(),l("span",ie,[e("b",null,h(i(A)(u.aditional_item_price)),1)])):w("",!0)])])):w("",!0)])}),128)),r[2]||(r[2]=e("hr",null,null,-1))])])]))),128))]),c(i(y),{onClick:r[0]||(r[0]=m=>i(_).setVisible("addAdditionToCart",!1)),icon:"pi pi-times",style:{position:"absolute",right:"-1rem",top:"-1rem"},rounded:"",severity:"danger"})]),_:1},8,["visible"])]))}},oe={class:"col-12 my-8 md:my-8 p-0"},ae={class:"mx-auto container",style:{"max-width":"900px"}},le={key:0,class:"empty-cart-message"},re={key:1,style:{display:"flex","flex-direction":"column",position:"sticky",top:"8rem",gap:"1rem","justify-content":"center"}},de={style:{display:"flex",gap:"1rem","justify-content":"end"}},ce=["src"],ue={style:{display:"flex","flex-direction":"column",gap:"0.4rem"}},pe={style:{display:"flex","flex-direction":"column","align-items":"end",gap:"0.3rem",width:"100%"}},me={style:{display:"flex","justify-content":"space-between","align-items":"center",width:"100%",gap:"1rem"}},_e={class:"p-0 m-0"},ye={style:{"text-transform":"uppercase","font-weight":"bold",width:"100%"}},he={style:{display:"flex"}},ve={class:"p-0",style:{"box-shadow":"0 0 0.5rem rgba(0, 0, 0, 0.2)","background-color":"#ff620000","border-radius":"5rem",display:"flex"}},ge={style:{display:"flex",gap:"1rem","align-items":"center",width:"100%","margin-top":"1rem","flex-wrap":"wrap"}},fe={key:0,style:{margin:"0"}},be={key:1,style:{margin:"0"}},xe={style:{display:"flex",gap:"1rem","flex-direction":"row"}},ke={class:"p-0 m-0",style:{"text-align":"end"}},we={class:"p-0 mt-1"},Ce={class:"col-12 p-0 mt-1"},$e={class:"mb-2"},Ae={class:"mb-2 text-center"},Ve={class:"mt-2"},Se={style:{display:"flex",width:"100%",gap:"1rem","justify-content":"space-between"}},qe={class:"text adicion",style:{"text-transform":"capitalize"}},Te={style:{display:"flex","align-items":"center"}},je={key:0,class:"pl-2 py-1 text-sm"},Ne={key:1,style:{"box-shadow":"0 0 5px rgba(0, 0, 0, 0.411)",display:"flex","border-radius":"0.3rem"},class:"ml-2"},Pe={__name:"cart",setup(z){const s=U(),_=P(),V=k({}),C=k({}),S=D(),$=()=>{C.value=s.cart.additions.reduce((d,o)=>{let t=o.group;return d[t]||(d[t]=[]),d[t].push(o),d},{})};q(()=>s.cart.additions,()=>{$()},{deep:!0});const f=d=>{const o={...d};o.quantity=1,s.addAdditionToCart(o)},n=d=>{d.quantity>1&&s.removeAdditionFromCart(d.id)},r=d=>{s.removeAdditionCompletelyFromCart(d.id),$()},m=d=>{d.forEach(o=>{r(o)})};q(()=>s.visibles.addAdditionToCart,d=>{d&&(V.value={})},{deep:!0});const u=k([]);return F(async()=>{var o;((o=S.user.payment_method_option)==null?void 0:o.id)!=7?_.setNeighborhoodPrice():_.setNeighborhoodPriceCero();const d=53;u.value=await T.getAditional(d),C.value=s.cart.additions.reduce((t,v)=>{let p=v.group;return t[p]||(t[p]=[]),t[p].push(v),t},{})}),(d,o)=>(a(),l("div",null,[e("div",oe,[o[4]||(o[4]=e("h4",{class:"title"},"Carrito de compras",-1)),e("div",ae,[i(s).cart.products.length===0?(a(),l("div",le,o[1]||(o[1]=[e("p",null,"Tu carrito está vacío. ¡Agrega productos para comenzar!",-1)]))):(a(),l("div",re,[(a(!0),l(b,null,x(i(s).cart.products,t=>{var v,p;return a(),l("div",{class:"p-3 p-shadow",key:t.product.id,style:{"align-items":"end",position:"relative","box-shadow":"0 .5rem 2rem #00000010",border:"1px solid #00000030",gap:"1rem","border-radius":"0.3rem"}},[e("div",de,[e("img",{style:{width:"5rem","object-fit":"cover",height:"5rem","background-color":""},src:`${i(H)}/read-photo-product/${t.product.img_identifier}/600`,alt:""},null,8,ce),e("div",ue,[e("div",pe,[e("div",me,[e("span",_e,h(t.product.product_name),1)]),e("span",ye,h(t.product.category_name),1),e("div",he,[e("div",ve,[c(i(y),{onClick:g=>i(s).removeProductInstance(t.product.id,t.flavors),icon:"pi pi-minus",severity:"success",style:{border:"none",outline:"none",width:"2rem",height:"1.5rem","border-radius":"0.4rem 0 0 0.4rem"}},null,8,["onClick"]),c(i(N),{class:"text-center",style:{"background-color":"transparent","font-weight":"bold",width:"3rem",height:"1.5rem",color:"black",border:"none"},modelValue:t.quantity,readonly:""},null,8,["modelValue"]),c(i(y),{onClick:g=>i(s).addProductToCart(t.product,1,[],t.flavors),icon:"pi pi-plus",severity:"success",style:{"font-weight":"bold",border:"none",outline:"none",width:"2rem",height:"1.5rem","border-radius":"0 0.4rem 0.4rem 0"}},null,8,["onClick"])])])])])]),c(i(y),{class:"ml-2",onClick:g=>i(s).removeProductFromCart(t.product.id,t.flavors),icon:"pi pi-times",severity:"danger",rounded:"",style:{border:"none",right:"-.5rem",top:"-.5rem",position:"absolute",outline:"none",width:"2rem",height:"2rem"}},null,8,["onClick"]),e("div",ge,[((v=t==null?void 0:t.flavors)==null?void 0:v.length)>1?(a(),l("h6",fe,o[2]||(o[2]=[e("b",{style:{padding:".5rem"}},"Sabores",-1)]))):((p=t==null?void 0:t.flavors)==null?void 0:p.length)>0?(a(),l("h6",be,o[3]||(o[3]=[e("b",null,"Sabor",-1)]))):w("",!0),e("div",xe,[(a(!0),l(b,null,x(t.flavors,g=>(a(),J(i(M),{style:{}},{default:j(()=>[K(h(g.name),1)]),_:2},1024))),256))])]),e("h5",ke,[e("b",null,h(i(A)(t.total_cost)),1)])])}),128)),e("div",we,[e("div",Ce,[(a(!0),l(b,null,x(C.value,(t,v)=>(a(),l("div",{class:"p-shadow p-3 mb-4",key:v,style:{position:"relative","border-radius":"0.3rem"}},[c(i(y),{class:"ml-2",onClick:p=>m(t),icon:"pi pi-trash",severity:"danger",rounded:"",style:{border:"none",right:"-.5rem",top:"-.5rem",position:"absolute",outline:"none",width:"2rem",height:"2rem"}},null,8,["onClick"]),e("div",$e,[e("span",Ae,[e("b",null,h(v),1)]),e("div",Ve,[(a(!0),l(b,null,x(t,p=>(a(),l("div",{key:p.aditional_item_instance_id,style:{display:"flex",gap:"1rem","align-items":"center"}},[c(i(y),{text:"",rounded:"",onClick:g=>r(p),class:"p-0 m-0",severity:"danger",style:{width:"2rem",height:"2rem",border:"none"},icon:"pi pi-trash m-0"},null,8,["onClick"]),e("div",Se,[e("span",qe,h(p.name),1),e("span",Te,[p.price>0?(a(),l("span",je,[e("b",null,h(i(A)(p.price*p.quantity)),1)])):w("",!0),v!="SALSAS"?(a(),l("div",Ne,[c(i(y),{onClick:g=>n(p),severity:"danger",style:{width:"2rem",height:"1.5rem",border:"none","border-radius":"0.3rem 0 0 0.3rem"},icon:"pi pi-minus"},null,8,["onClick"]),c(i(N),{modelValue:p.quantity,readonly:"",style:{width:"2rem",border:"none",height:"1.5rem"},class:"p-0 text-center"},null,8,["modelValue"]),c(i(y),{onClick:g=>f(p),severity:"danger",style:{width:"2rem",height:"1.5rem",border:"none","border-radius":"0 0.3rem 0.3rem 0"},icon:"pi pi-plus"},null,8,["onClick"])])):w("",!0)])])]))),128))])])]))),128)),e("div",{onClick:o[0]||(o[0]=t=>i(s).setVisible("addAdditionToCart",!0)),class:"col-12 p-0 m-0",style:{display:"flex","justify-content":"end"}},[c(i(y),{style:{width:"2rem",left:".3rem",height:"2rem"},rounded:"",severity:"danger",icon:"pi pi-plus"})])])])])),c(B,{class:"md:col-6"})])]),c(ne)]))}},ze=L(Pe,[["__scopeId","data-v-6f93a79e"]]);export{ze as default};
