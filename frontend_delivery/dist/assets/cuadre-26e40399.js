import{h as ut,i as dt,u as mt,b as nt,d as $t,r as et,o as G,c as Q,e as O,a as V,F as vt,j as pt,t as E,k as rt,U as yt,w as W}from"./index-2ea80005.js";import{f as gt}from"./fetchService-86ec2152.js";import{f as _t}from"./valoresReactivosCompartidos-57991516.js";import{f as ct}from"./formatoPesos-2a38d2e7.js";var at=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function it(F){return F&&F.__esModule&&Object.prototype.hasOwnProperty.call(F,"default")?F.default:F}var lt={exports:{}};(function(F,K){(function(k,b){F.exports=b()})(at,function(){var k=1e3,b=6e4,N=36e5,I="millisecond",p="second",m="minute",i="hour",S="day",H="week",g="month",d="quarter",f="year",c="date",r="Invalid Date",l=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,_=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,D={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(a){var n=["th","st","nd","rd"],t=a%100;return"["+a+(n[(t-20)%10]||n[t]||n[0])+"]"}},y=function(a,n,t){var s=String(a);return!s||s.length>=n?a:""+Array(n+1-s.length).join(t)+a},z={s:y,z:function(a){var n=-a.utcOffset(),t=Math.abs(n),s=Math.floor(t/60),e=t%60;return(n<=0?"+":"-")+y(s,2,"0")+":"+y(e,2,"0")},m:function a(n,t){if(n.date()<t.date())return-a(t,n);var s=12*(t.year()-n.year())+(t.month()-n.month()),e=n.clone().add(s,g),o=t-e<0,u=n.clone().add(s+(o?-1:1),g);return+(-(s+(t-e)/(o?e-u:u-e))||0)},a:function(a){return a<0?Math.ceil(a)||0:Math.floor(a)},p:function(a){return{M:g,y:f,w:H,d:S,D:c,h:i,m,s:p,ms:I,Q:d}[a]||String(a||"").toLowerCase().replace(/s$/,"")},u:function(a){return a===void 0}},w="en",C={};C[w]=D;var U="$isDayjsObject",A=function(a){return a instanceof X||!(!a||!a[U])},L=function a(n,t,s){var e;if(!n)return w;if(typeof n=="string"){var o=n.toLowerCase();C[o]&&(e=o),t&&(C[o]=t,e=o);var u=n.split("-");if(!e&&u.length>1)return a(u[0])}else{var $=n.name;C[$]=n,e=$}return!s&&e&&(w=e),e||!s&&w},v=function(a,n){if(A(a))return a.clone();var t=typeof n=="object"?n:{};return t.date=a,t.args=arguments,new X(t)},h=z;h.l=L,h.i=A,h.w=function(a,n){return v(a,{locale:n.$L,utc:n.$u,x:n.$x,$offset:n.$offset})};var X=function(){function a(t){this.$L=L(t.locale,null,!0),this.parse(t),this.$x=this.$x||t.x||{},this[U]=!0}var n=a.prototype;return n.parse=function(t){this.$d=function(s){var e=s.date,o=s.utc;if(e===null)return new Date(NaN);if(h.u(e))return new Date;if(e instanceof Date)return new Date(e);if(typeof e=="string"&&!/Z$/i.test(e)){var u=e.match(l);if(u){var $=u[2]-1||0,M=(u[7]||"0").substring(0,3);return o?new Date(Date.UTC(u[1],$,u[3]||1,u[4]||0,u[5]||0,u[6]||0,M)):new Date(u[1],$,u[3]||1,u[4]||0,u[5]||0,u[6]||0,M)}}return new Date(e)}(t),this.init()},n.init=function(){var t=this.$d;this.$y=t.getFullYear(),this.$M=t.getMonth(),this.$D=t.getDate(),this.$W=t.getDay(),this.$H=t.getHours(),this.$m=t.getMinutes(),this.$s=t.getSeconds(),this.$ms=t.getMilliseconds()},n.$utils=function(){return h},n.isValid=function(){return this.$d.toString()!==r},n.isSame=function(t,s){var e=v(t);return this.startOf(s)<=e&&e<=this.endOf(s)},n.isAfter=function(t,s){return v(t)<this.startOf(s)},n.isBefore=function(t,s){return this.endOf(s)<v(t)},n.$g=function(t,s,e){return h.u(t)?this[s]:this.set(e,t)},n.unix=function(){return Math.floor(this.valueOf()/1e3)},n.valueOf=function(){return this.$d.getTime()},n.startOf=function(t,s){var e=this,o=!!h.u(s)||s,u=h.p(t),$=function(R,Y){var Z=h.w(e.$u?Date.UTC(e.$y,Y,R):new Date(e.$y,Y,R),e);return o?Z:Z.endOf(S)},M=function(R,Y){return h.w(e.toDate()[R].apply(e.toDate("s"),(o?[0,0,0,0]:[23,59,59,999]).slice(Y)),e)},x=this.$W,T=this.$M,j=this.$D,P="set"+(this.$u?"UTC":"");switch(u){case f:return o?$(1,0):$(31,11);case g:return o?$(1,T):$(0,T+1);case H:var B=this.$locale().weekStart||0,J=(x<B?x+7:x)-B;return $(o?j-J:j+(6-J),T);case S:case c:return M(P+"Hours",0);case i:return M(P+"Minutes",1);case m:return M(P+"Seconds",2);case p:return M(P+"Milliseconds",3);default:return this.clone()}},n.endOf=function(t){return this.startOf(t,!1)},n.$set=function(t,s){var e,o=h.p(t),u="set"+(this.$u?"UTC":""),$=(e={},e[S]=u+"Date",e[c]=u+"Date",e[g]=u+"Month",e[f]=u+"FullYear",e[i]=u+"Hours",e[m]=u+"Minutes",e[p]=u+"Seconds",e[I]=u+"Milliseconds",e)[o],M=o===S?this.$D+(s-this.$W):s;if(o===g||o===f){var x=this.clone().set(c,1);x.$d[$](M),x.init(),this.$d=x.set(c,Math.min(this.$D,x.daysInMonth())).$d}else $&&this.$d[$](M);return this.init(),this},n.set=function(t,s){return this.clone().$set(t,s)},n.get=function(t){return this[h.p(t)]()},n.add=function(t,s){var e,o=this;t=Number(t);var u=h.p(s),$=function(T){var j=v(o);return h.w(j.date(j.date()+Math.round(T*t)),o)};if(u===g)return this.set(g,this.$M+t);if(u===f)return this.set(f,this.$y+t);if(u===S)return $(1);if(u===H)return $(7);var M=(e={},e[m]=b,e[i]=N,e[p]=k,e)[u]||1,x=this.$d.getTime()+t*M;return h.w(x,this)},n.subtract=function(t,s){return this.add(-1*t,s)},n.format=function(t){var s=this,e=this.$locale();if(!this.isValid())return e.invalidDate||r;var o=t||"YYYY-MM-DDTHH:mm:ssZ",u=h.z(this),$=this.$H,M=this.$m,x=this.$M,T=e.weekdays,j=e.months,P=e.meridiem,B=function(Y,Z,q,tt){return Y&&(Y[Z]||Y(s,o))||q[Z].slice(0,tt)},J=function(Y){return h.s($%12||12,Y,"0")},R=P||function(Y,Z,q){var tt=Y<12?"AM":"PM";return q?tt.toLowerCase():tt};return o.replace(_,function(Y,Z){return Z||function(q){switch(q){case"YY":return String(s.$y).slice(-2);case"YYYY":return h.s(s.$y,4,"0");case"M":return x+1;case"MM":return h.s(x+1,2,"0");case"MMM":return B(e.monthsShort,x,j,3);case"MMMM":return B(j,x);case"D":return s.$D;case"DD":return h.s(s.$D,2,"0");case"d":return String(s.$W);case"dd":return B(e.weekdaysMin,s.$W,T,2);case"ddd":return B(e.weekdaysShort,s.$W,T,3);case"dddd":return T[s.$W];case"H":return String($);case"HH":return h.s($,2,"0");case"h":return J(1);case"hh":return J(2);case"a":return R($,M,!0);case"A":return R($,M,!1);case"m":return String(M);case"mm":return h.s(M,2,"0");case"s":return String(s.$s);case"ss":return h.s(s.$s,2,"0");case"SSS":return h.s(s.$ms,3,"0");case"Z":return u}return null}(Y)||u.replace(":","")})},n.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},n.diff=function(t,s,e){var o,u=this,$=h.p(s),M=v(t),x=(M.utcOffset()-this.utcOffset())*b,T=this-M,j=function(){return h.m(u,M)};switch($){case f:o=j()/12;break;case g:o=j();break;case d:o=j()/3;break;case H:o=(T-x)/6048e5;break;case S:o=(T-x)/864e5;break;case i:o=T/N;break;case m:o=T/b;break;case p:o=T/k;break;default:o=T}return e?o:h.a(o)},n.daysInMonth=function(){return this.endOf(g).$D},n.$locale=function(){return C[this.$L]},n.locale=function(t,s){if(!t)return this.$L;var e=this.clone(),o=L(t,s,!0);return o&&(e.$L=o),e},n.clone=function(){return h.w(this.$d,this)},n.toDate=function(){return new Date(this.valueOf())},n.toJSON=function(){return this.isValid()?this.toISOString():null},n.toISOString=function(){return this.$d.toISOString()},n.toString=function(){return this.$d.toUTCString()},a}(),ot=X.prototype;return v.prototype=ot,[["$ms",I],["$s",p],["$m",m],["$H",i],["$W",S],["$M",g],["$y",f],["$D",c]].forEach(function(a){ot[a[1]]=function(n){return this.$g(n,a[0],a[1])}}),v.extend=function(a,n){return a.$i||(a(n,X,v),a.$i=!0),v},v.locale=L,v.isDayjs=A,v.unix=function(a){return v(1e3*a)},v.en=C[w],v.Ls=C,v.p={},v})})(lt);var Dt=lt.exports;const st=it(Dt);var ft={exports:{}};(function(F,K){(function(k,b){F.exports=b()})(at,function(){var k="minute",b=/[+-]\d\d(?::?\d\d)?/g,N=/([+-]|\d\d)/g;return function(I,p,m){var i=p.prototype;m.utc=function(r){var l={date:r,utc:!0,args:arguments};return new p(l)},i.utc=function(r){var l=m(this.toDate(),{locale:this.$L,utc:!0});return r?l.add(this.utcOffset(),k):l},i.local=function(){return m(this.toDate(),{locale:this.$L,utc:!1})};var S=i.parse;i.parse=function(r){r.utc&&(this.$u=!0),this.$utils().u(r.$offset)||(this.$offset=r.$offset),S.call(this,r)};var H=i.init;i.init=function(){if(this.$u){var r=this.$d;this.$y=r.getUTCFullYear(),this.$M=r.getUTCMonth(),this.$D=r.getUTCDate(),this.$W=r.getUTCDay(),this.$H=r.getUTCHours(),this.$m=r.getUTCMinutes(),this.$s=r.getUTCSeconds(),this.$ms=r.getUTCMilliseconds()}else H.call(this)};var g=i.utcOffset;i.utcOffset=function(r,l){var _=this.$utils().u;if(_(r))return this.$u?0:_(this.$offset)?g.call(this):this.$offset;if(typeof r=="string"&&(r=function(w){w===void 0&&(w="");var C=w.match(b);if(!C)return null;var U=(""+C[0]).match(N)||["-",0,0],A=U[0],L=60*+U[1]+ +U[2];return L===0?0:A==="+"?L:-L}(r),r===null))return this;var D=Math.abs(r)<=16?60*r:r,y=this;if(l)return y.$offset=D,y.$u=r===0,y;if(r!==0){var z=this.$u?this.toDate().getTimezoneOffset():-1*this.utcOffset();(y=this.local().add(D+z,k)).$offset=D,y.$x.$localOffset=z}else y=this.utc();return y};var d=i.format;i.format=function(r){var l=r||(this.$u?"YYYY-MM-DDTHH:mm:ss[Z]":"");return d.call(this,l)},i.valueOf=function(){var r=this.$utils().u(this.$offset)?0:this.$offset+(this.$x.$localOffset||this.$d.getTimezoneOffset());return this.$d.valueOf()-6e4*r},i.isUTC=function(){return!!this.$u},i.toISOString=function(){return this.toDate().toISOString()},i.toString=function(){return this.toDate().toUTCString()};var f=i.toDate;i.toDate=function(r){return r==="s"&&this.$offset?m(this.format("YYYY-MM-DD HH:mm:ss:SSS")).toDate():f.call(this)};var c=i.diff;i.diff=function(r,l,_){if(r&&this.$u===r.$u)return c.call(this,r,l,_);var D=this.local(),y=m(r).local();return c.call(D,y,l,_)}}})})(ft);var Mt=ft.exports;const wt=it(Mt);var ht={exports:{}};(function(F,K){(function(k,b){F.exports=b()})(at,function(){var k={year:0,month:1,day:2,hour:3,minute:4,second:5},b={};return function(N,I,p){var m,i=function(d,f,c){c===void 0&&(c={});var r=new Date(d),l=function(_,D){D===void 0&&(D={});var y=D.timeZoneName||"short",z=_+"|"+y,w=b[z];return w||(w=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:_,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",timeZoneName:y}),b[z]=w),w}(f,c);return l.formatToParts(r)},S=function(d,f){for(var c=i(d,f),r=[],l=0;l<c.length;l+=1){var _=c[l],D=_.type,y=_.value,z=k[D];z>=0&&(r[z]=parseInt(y,10))}var w=r[3],C=w===24?0:w,U=r[0]+"-"+r[1]+"-"+r[2]+" "+C+":"+r[4]+":"+r[5]+":000",A=+d;return(p.utc(U).valueOf()-(A-=A%1e3))/6e4},H=I.prototype;H.tz=function(d,f){d===void 0&&(d=m);var c,r=this.utcOffset(),l=this.toDate(),_=l.toLocaleString("en-US",{timeZone:d}),D=Math.round((l-new Date(_))/1e3/60),y=15*-Math.round(l.getTimezoneOffset()/15)-D;if(!Number(y))c=this.utcOffset(0,f);else if(c=p(_,{locale:this.$L}).$set("millisecond",this.$ms).utcOffset(y,!0),f){var z=c.utcOffset();c=c.add(r-z,"minute")}return c.$x.$timezone=d,c},H.offsetName=function(d){var f=this.$x.$timezone||p.tz.guess(),c=i(this.valueOf(),f,{timeZoneName:d}).find(function(r){return r.type.toLowerCase()==="timezonename"});return c&&c.value};var g=H.startOf;H.startOf=function(d,f){if(!this.$x||!this.$x.$timezone)return g.call(this,d,f);var c=p(this.format("YYYY-MM-DD HH:mm:ss:SSS"),{locale:this.$L});return g.call(c,d,f).tz(this.$x.$timezone,!0)},p.tz=function(d,f,c){var r=c&&f,l=c||f||m,_=S(+p(),l);if(typeof d!="string")return p(d).tz(l);var D=function(C,U,A){var L=C-60*U*1e3,v=S(L,A);if(U===v)return[L,U];var h=S(L-=60*(v-U)*1e3,A);return v===h?[L,v]:[C-60*Math.min(v,h)*1e3,Math.max(v,h)]}(p.utc(d,r).valueOf(),_,l),y=D[0],z=D[1],w=p(y).utcOffset(z);return w.$x.$timezone=l,w},p.tz.guess=function(){return Intl.DateTimeFormat().resolvedOptions().timeZone},p.tz.setDefault=function(d){m=d}}})})(ht);var Ot=ht.exports;const St=it(Ot),bt={style:{margin:"auto","max-width":"700px","margin-top":"4rem"},class:"p-3"},xt={class:"flex gap-3 mb-4"},Tt={class:"m-0 my-2"},Ct={class:"px-4 m-0 py-1",style:{"text-transform":"capitalize","background-color":"var(--primary-color)",color:"white"}},zt={style:{display:"flex","justify-content":"space-between"}},Yt={key:0,class:"m-0",style:{"text-transform":"capitalize"}},kt={key:1,class:"m-0"},Ht=O("div",{class:"text-center",style:{width:"100%"}},[O("h6",{class:"m-0"},[O("b",null,"Cantidad")])],-1),Ut={class:"m-0"},Lt=O("div",{class:"text-right",style:{width:"100%"}},[O("h6",{class:"m-0"},[O("b",null,"Valor")])],-1),Ft={class:"m-0"},It={class:"m-0 my-0 text-right",style:{width:"100%"}},jt=O("div",{style:{height:"2px",width:"100%","background-color":"black"}},null,-1),Nt={class:"m-0 my-0 text-right",style:{width:"100%",display:"flex","justify-content":"space-between"}},At=O("span",null,[O("b",null,"Total")],-1),Vt="America/Bogota",Et={__name:"cuadre",setup(F){st.extend(wt),st.extend(St);const K=ut(()=>b.value.reduce((m,i)=>m+i.category_total_revenue,0)),k=dt();mt();const b=nt([]),N=nt(null),I=nt(null),p=async()=>{if(!N.value||!I.value){alert("Por favor selecciona ambas fechas.");return}const m=N.value.toISOString().split("T")[0],i=I.value.toISOString().split("T")[0];b.value=await gt.get(`${yt}/get-reports?start_date=${m}&end_date=${i}`)};return $t(async()=>{const i=st().tz(Vt).hour(10).minute(0).second(0),S=i.add(1,"day").hour(4).minute(0).second(0);N.value=i.toDate(),I.value=S.toDate(),k.getTodayOrders(),await p()}),ut(()=>k.TodayOrders.filter(m=>m.current_status==="enviada").reduce((m,i)=>m+i.total_order_price,0)),(m,i)=>{const S=et("Calendar"),H=et("Button"),g=et("Column"),d=et("DataTable");return G(),Q("div",bt,[O("div",xt,[V(S,{showTime:"",hourFormat:"12",modelValue:N.value,"onUpdate:modelValue":i[0]||(i[0]=f=>N.value=f),dateFormat:"dd / mm / yy",placeholder:"Fecha inicio"},null,8,["modelValue"]),V(S,{showTime:"",hourFormat:"12",modelValue:I.value,"onUpdate:modelValue":i[1]||(i[1]=f=>I.value=f),dateFormat:"dd / mm / yy",placeholder:"Fecha fin"},null,8,["modelValue"]),V(H,{size:"small",severity:"help",label:"Buscar",icon:"pi pi-search",onClick:p})]),(G(!0),Q(vt,null,pt(b.value,f=>(G(),Q("div",{key:f.category_name},[O("h5",Tt,[O("b",null,E(f.category_name),1)]),V(d,{stripedRows:"",value:f.products_info},{default:W(()=>[V(g,{class:"p-0",style:{width:"15rem"}},{body:W(c=>{var r;return[O("h6",Ct,[O("b",zt,E((r=c.data.product_name)==null?void 0:r.toLowerCase()),1)]),V(d,{value:c.data.flavors_info},{default:W(()=>[V(g,{header:"Sabor",class:"p-0",style:{width:"15rem"}},{body:W(l=>{var _,D;return[((_=l.data.flavor)==null?void 0:_.replace(/"/g,""))!="NO_FLAVOR"?(G(),Q("h6",Yt,E((D=l.data.flavor)==null?void 0:D.toLowerCase()),1)):(G(),Q("h6",kt," --- "))]}),_:1}),V(g,{class:"p-0 text-center",style:{width:"15rem"}},{header:W(()=>[Ht]),body:W(l=>[O("h6",Ut,E(l.data.quantity_text),1)]),_:1}),V(g,{class:"p-0 text-right",style:{width:"15rem"}},{header:W(()=>[Lt]),body:W(l=>[O("h6",Ft,E(rt(_t)(l.data.revenue)),1)]),_:1})]),_:2},1032,["value"])]}),_:1})]),_:2},1032,["value"]),O("h5",It,[O("b",null,E(rt(ct)(f.category_total_revenue)),1)])]))),128)),jt,O("h2",Nt,[At,O("b",null,E(rt(ct)(K.value)),1)])])}}};export{Et as default};
