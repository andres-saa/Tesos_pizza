import{k as w,m as c,j as i,g as k,U as p,w as x,r as h,o as u,c as d,b as l,a as m,p as y}from"./index-0c0fb4fd.js";const g={router:w,async get(o,n,a={}){try{const e={headers:a.headers||{}},r=await c.get(o,e);return r.status===200?r.data:(console.error("An error occurred while fetching data:",r.status),null)}catch(e){return console.error("An error occurred while fetching data:",e),null}},async post(o,n,a,e=null){try{const r=await c.post(o,n);return r.status===200||r.status===201?(e&&this.router.push(e),r.data):(console.error("An error occurred while posting data:",r.status),null)}catch(r){return console.error("An error occurred while posting data:",r),null}},async put(o,n,a,e=null){try{const r=await c.put(o,n);return r.status===200||r.status===204?(e&&this.router.push(e),r.data):(console.error("An error occurred while updating data:",r.status),null)}catch(r){return console.error("An error occurred while updating data:",r),null}},async delete(o,n,a=null){try{const e=await c.delete(o);return e.status===200||e.status===204?(a&&this.router.push(a),e.data):(console.error("An error occurred while deleting data:",e.status),null)}catch(e){return console.error("An error occurred while deleting data:",e),null}}},b={class:"m-auto my-7",style:{"max-width":"50rem",height:"60vh"}},A={style:{display:"flex",gap:"2rem"}},$={style:{display:"flex",gap:"2rem","justify-content":"center"}},U={style:{width:"100%","max-width":"25rem"}},V=l("h3",{style:{"text-transform":"uppercase","text-align":"center"},class:"my-4"},[l("b",null,"ACTUAL")],-1),B=["src"],E={key:0,style:{width:"100%"}},I=l("h3",{style:{"text-transform":"uppercase","text-align":"center"},class:"my-4"},[l("b",null,"Nuevo")],-1),C=["src"],N={__name:"post",setup(o){const n=i(""),a=i(""),e=i({link:""});k(async()=>{try{const s=await g.get(`${p}/last-post`);if(s.link){const t=new URL(s.link);t.pathname.includes("/reel/")?t.pathname=t.pathname.replace("/reel/","/p/"):t.pathname.includes("/p/")||(t.pathname=`/p${t.pathname}`),e.value.link=`${t.origin}${t.pathname}`}}catch(s){console.error("Error al obtener el enlace actual:",s)}}),x(n,s=>{if(s.includes("http")){const t=new URL(s);t.pathname.includes("/reel/")?t.pathname=t.pathname.replace("/reel/","/p/"):t.pathname.includes("/p/")||(t.pathname=`/p${t.pathname}`),a.value=`${t.origin}${t.pathname}`}else a.value=""});const r=async()=>{try{const s=await g.post(`${p}/update-last-post`,{link:a.value});console.log("Enlace enviado al servidor:",s),e.value.link=a.value,console.log("Enlace actual actualizado en la vista"),n.value="",a.value=""}catch(s){console.error("Error al enviar el enlace al servidor:",s)}};return(s,t)=>{const f=h("InputText"),v=h("Button");return u(),d("div",b,[l("div",A,[m(f,{modelValue:n.value,"onUpdate:modelValue":t[0]||(t[0]=_=>n.value=_),placeholder:"Inserta aquí el link de tu último post de Instagram",style:{width:"100%"}},null,8,["modelValue"]),m(v,{onClick:r,severity:"help",style:{width:"30%"},label:"Realizar cambio"})]),l("div",$,[l("div",U,[V,e.value.link?(u(),d("iframe",{key:0,src:`${e.value.link}embed`,width:"100%",style:{height:"900px"},frameborder:"0",scrolling:"no",allowtransparency:"true"},`
                `,8,B)):y("",!0)]),a.value.includes("http")?(u(),d("div",E,[I,l("iframe",{src:`${a.value}embed`,width:"100%",style:{height:"900px"},frameborder:"0",scrolling:"no",allowtransparency:"true"},`
                `,8,C)])):y("",!0)])])}}};export{N as default};
