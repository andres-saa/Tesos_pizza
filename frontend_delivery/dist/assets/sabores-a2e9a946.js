import{a as P}from"./aditionalService-1fa7aad6.js";import{f as re}from"./formatoPesos-2a38d2e7.js";import{_ as ie,u as ne,m as de,b as i,d as ue,p as j,r as v,o as m,c as g,e,a as t,F as q,k as pe,w as a,U as c,t as $,B as L,i as ve,q as B,g as V,s as me,v as ce,G as O}from"./index-d65d6581.js";import{f as _}from"./fetchService-ba596ed3.js";const u=D=>(me("data-v-465abe8e"),D=D(),ce(),D),_e={class:"px-3",style:{}},fe={class:"p-2 mx-auto",style:{"max-width":"540px",overflow:"hidden","background-color":"var(--primary-color)","border-bottom":"2px solid #00000050","border-radius":".5rem .5rem 0 0","box-shadow":"0 1rem 1rem #00000030",gap:"1rem",padding:"0 3rem",margin:"auto",display:"flex","justify-content":"space-between","align-items":"center"}},ye=u(()=>e("p",{class:"text-center pl-3 text-xl p-0 m-0",style:{"font-weight":"bold",width:"min-content",color:"white",gap:"1rem","align-items":"center"}}," SABORES ",-1)),be={style:{display:"flex",gap:".5rem","align-items":"center"}},ge=u(()=>e("h6",{class:"m-0 text-white p-0"},"|",-1)),he={class:"m-auto col-12 m-0 p-0",style:{"max-width":"540px","box-shadow":"0 1rem 1rem #00000030","border-bottom":"2px solid #00000050",overflow:"hidden"}},xe={class:"my-1 px-2",style:{display:"flex","justify-content":"space-between","align-items":"center",gap:"1rem"}},we={key:0,class:"pi pi-angle-up text-2xl"},ke={key:1,class:"pi pi-angle-down text-2xl"},Ce={class:"text-center text-xl m-0",style:{"font-weight":"bold","text-transform":"capitalize"}},$e=u(()=>e("b",null,[e("i",{class:"pi pi-arrow-left"})],-1)),Ve={style:{display:"flex",gap:".5rem","justify-content":"end"}},De={class:"m-0",style:{"text-transform":"uppercase"}},Ee={key:0,class:"m-0",style:{"font-weight":"bold","text-align":"end"}},Ne={style:{display:"flex",gap:".5rem","justify-content":"end"}},Ue={class:"py-3"},Ge={style:{display:"flex",gap:"1rem","flex-direction":"column"}},Fe=u(()=>e("h6",{class:"m-0 p-0"},[e("b",null,"Nombre")],-1)),Ie=u(()=>e("h6",{class:"m-0 p-0"},[e("b",null,"precio")],-1)),je={style:{display:"flex","justify-content":"end"}},Se={style:{display:"flex","justify-content":"end"}},Te={style:{display:"flex","justify-content":"end"}},Be={class:"py-3"},Ae={style:{display:"flex",gap:"1rem","flex-direction":"column"}},Re=u(()=>e("h6",{class:"m-0 p-0"},[e("b",null,"Nombre")],-1)),ze={style:{display:"flex","justify-content":"end"}},Me={class:"py-3"},Pe={style:{display:"flex",gap:"1rem","flex-direction":"column"}},qe=u(()=>e("h6",{class:"m-0 p-0"},[e("b",null,"Grupo")],-1)),Le=u(()=>e("h6",{class:"m-0 p-0"},[e("b",null,"Nombre")],-1)),Oe=u(()=>e("h6",{class:"m-0 p-0"},[e("b",null,"precio")],-1)),He={style:{display:"flex","justify-content":"end"}},Je={class:"py-3"},Ke={style:{display:"flex",gap:"1rem","flex-direction":"column"}},Qe=u(()=>e("h6",{class:"m-0 p-0"},[e("b",null,"Nombre")],-1)),We={style:{display:"flex","justify-content":"end"}},Xe={__name:"sabores",setup(D){const A=ne(),R=de(),h=i(!1),x=i(!1),E=i(!1),N=i(!1),w=i(!1),k=i(!1),S=i({}),T=i({}),H=s=>{S.value={...s},w.value=!0},J=s=>{T.value={...s},k.value=!0},K=async()=>{try{await _.delete(`${c}/delete_flavor/${S.value.flavor_id}`),y(),w.value=!1}catch(s){console.error("Error eliminando el sabor:",s),alert("Hubo un error eliminando el sabor.")}},Q=async()=>{try{await _.delete(`${c}/delete_flavor_group/${T.value.group_id}`),y(),k.value=!1}catch(s){console.error("Error eliminando el grupo:",s),alert("Hubo un error eliminando el grupo.")}},z=i({}),n=i({name:"",price:0,flavor_group_id:null}),C=i({name:""}),U=i({}),f=i({}),p=i({}),W=s=>{p.value={...s},E.value=!0},X=s=>{f.value={...s},N.value=!0},G=i({}),Y=async()=>{(!n.value.name||!n.value.flavor_group_id)&&alert("Llena los datos obligatorios"),console.log(n.value);const s={name:n.value.name,price:n.value.price||0};await _.post(`${c}/create-flavor/${n.value.flavor_group_id}`,s),y(),h.value=!1},Z=async()=>{C.value.name||alert("No puedes crear un grupo sin nombre"),await _.post(`${c}/create-flavor-grouped`,C.value),y(),x.value=!1},ee=async()=>{f.value.group_name||alert("No puedes crear un grupo sin nombre");const s={name:f.value.group_name,id:f.value.group_id};console.log(f.value),await _.post(`${c}/edit-flavor-grouped`,s),y(),N.value=!1},le=async()=>{p.value.flavor_name||alert("No puedes crear un grupo sin nombre");const s={name:p.value.flavor_name,price:p.value.flavor_price};await _.post(`${c}/edit-flavor/${p.value.flavor_id}`,s),y(),E.value=!1},y=async()=>{G.value=await _.get(`${c}/get-flavor-grouped`),z.value=await _.get(`${c}/get-aditional-category`)};return ue(async()=>{await y()}),j(()=>R.path,async()=>{R.params.category_id&&(G.value=await P.getAllAditions(),await O())},{deep:!0}),j(()=>A.site,async()=>{A.site&&(G.value=await P.getAllAditions(),await O())},{deep:!0}),j(h,()=>{n.value={}}),j(x,()=>{C.value={}}),(s,o)=>{const r=v("Button"),F=v("Column"),oe=v("Tag"),te=v("DataTable"),I=v("InputText"),M=v("InputNumber"),b=v("Dialog"),ae=v("Dropdown");return m(),g(q,null,[e("div",_e,[e("div",fe,[ye,e("div",be,[t(r,{onClick:o[0]||(o[0]=l=>h.value=!0),icon:"pi pi-plus",size:"small",style:{height:"2.5rem","background-color":"var(--primary-color)",border:"none","border-radius":".3rem"},label:"Nuevo sabor"}),ge,t(r,{onClick:o[1]||(o[1]=l=>x.value=!0),icon:"pi pi-plus",size:"small",style:{height:"2.5rem","background-color":"var(--primary-color)",border:"none","border-radius":".3rem"},label:"Nuevo Grupo"})])])]),(m(!0),g(q,null,pe(G.value,l=>(m(),g("div",he,[e("div",xe,[t(r,{onClick:d=>U.value[l.group_id]=!U.value[l.group_id],text:"",style:{color:"var(--primary-color)"}},{default:a(()=>[e("b",null,[U.value[l.group_id]?(m(),g("i",we)):(m(),g("i",ke))])]),_:2},1032,["onClick"]),e("h6",Ce,$(l.group_name),1),$e,e("div",Ve,[t(r,{onClick:d=>X(l),style:{width:"2.5rem",height:"2.5rem","border-radius":".3rem"},severity:"warning",class:"p-1 m-0",rounded:"",icon:" pi pi-pencil"},null,8,["onClick"]),t(r,{onClick:d=>J(l),style:{width:"2.5rem",height:"2.5rem","border-radius":".3rem"},severity:"danger",class:"p-1",rounded:"",icon:" pi pi-trash"},null,8,["onClick"])])]),U.value[l.group_id]?(m(),L(te,{key:0,showGridlines:"",stripedRows:"",value:l==null?void 0:l.flavors},{default:a(()=>[t(F,{style:{"text-transform":"capitalize"},class:"p-0 px-2",field:"aditional_item_name",header:"NOMBRE"},{body:a(d=>[e("h6",De,$(d.data.flavor_name),1)]),_:1}),t(F,{class:"p px-2",field:"aditional_item_price",header:"PRECIO",style:{"text-transform":"capitalize",display:"flex","justify-content":"center"}},{body:a(d=>[d.data.flavor_price!=0?(m(),g("h6",Ee,$(ve(re)(d.data.flavor_price)),1)):B("",!0)]),_:1}),t(F,{class:"p-0 py-1 pl-3 px-2",field:"",header:"PREMIUM"},{body:a(d=>[d.data.is_premium?(m(),L(oe,{key:0,style:{"border-radius":".2rem"},severity:"success"},{default:a(()=>[V(" Premium")]),_:1})):B("",!0)]),_:1}),t(F,{style:{width:"2rem"},class:"p-0 py-1 pl-3 px-2",header:"Interactuar"},{body:a(d=>[e("div",Ne,[t(r,{onClick:se=>W(d.data),style:{width:"2.5rem",height:"2.5rem","border-radius":".3rem"},severity:"warning",class:"p-1 m-0",rounded:"",icon:" pi pi-pencil"},null,8,["onClick"]),t(r,{onClick:se=>H(d.data),style:{width:"2.5rem",height:"2.5rem","border-radius":".3rem"},severity:"danger",class:"p-1",rounded:"",icon:" pi pi-trash"},null,8,["onClick"])])]),_:1})]),_:2},1032,["value"])):B("",!0)]))),256)),t(b,{visible:E.value,"onUpdate:visible":o[5]||(o[5]=l=>E.value=l),header:"Editar sabor",modal:"",style:{width:"30rem"}},{footer:a(()=>[e("div",je,[t(r,{onClick:o[4]||(o[4]=l=>le()),style:{"background-color":"var(--primary-color)",border:"none","border-radius":".3rem"},label:"Guardar"})])]),default:a(()=>[e("div",Ue,[e("div",Ge,[Fe,t(I,{modelValue:p.value.flavor_name,"onUpdate:modelValue":o[2]||(o[2]=l=>p.value.flavor_name=l),style:{width:"100%"}},null,8,["modelValue"]),Ie,t(M,{modelValue:p.value.flavor_price,"onUpdate:modelValue":o[3]||(o[3]=l=>p.value.flavor_price=l),prefix:"$ ",style:{width:"100%"}},null,8,["modelValue"])])])]),_:1},8,["visible"]),t(b,{visible:w.value,"onUpdate:visible":o[7]||(o[7]=l=>w.value=l),header:"Eliminar sabor",modal:"",style:{width:"30rem"}},{footer:a(()=>[e("div",Se,[t(r,{onClick:o[6]||(o[6]=l=>w.value=!1),label:"Cancelar",class:"p-button-text"}),t(r,{onClick:K,label:"Eliminar",severity:"danger",style:{"margin-left":"1rem"}})])]),default:a(()=>[e("p",null,[V("¿Estás seguro de que deseas eliminar el sabor "),e("b",null,$(S.value.flavor_name),1),V("?")])]),_:1},8,["visible"]),t(b,{visible:k.value,"onUpdate:visible":o[9]||(o[9]=l=>k.value=l),header:"Eliminar grupo",modal:"",style:{width:"30rem"}},{footer:a(()=>[e("div",Te,[t(r,{onClick:o[8]||(o[8]=l=>k.value=!1),label:"Cancelar",class:"p-button-text"}),t(r,{onClick:Q,label:"Eliminar",severity:"danger",style:{"margin-left":"1rem"}})])]),default:a(()=>[e("p",null,[V("¿Estás seguro de que deseas eliminar el grupo "),e("b",null,$(T.value.group_name),1),V("?")])]),_:1},8,["visible"]),t(b,{visible:x.value,"onUpdate:visible":o[12]||(o[12]=l=>x.value=l),header:"Nuevo grupo de sabores",modal:"",style:{width:"30rem"}},{footer:a(()=>[e("div",ze,[t(r,{onClick:o[11]||(o[11]=l=>Z()),style:{"background-color":"var(--primary-color)",border:"none","border-radius":".3rem"},label:"Guardar"})])]),default:a(()=>[e("div",Be,[e("div",Ae,[Re,t(I,{modelValue:C.value.name,"onUpdate:modelValue":o[10]||(o[10]=l=>C.value.name=l),style:{width:"100%"}},null,8,["modelValue"])])])]),_:1},8,["visible"]),t(b,{visible:h.value,"onUpdate:visible":o[17]||(o[17]=l=>h.value=l),header:"Nuevo sabor",modal:"",style:{width:"30rem"}},{footer:a(()=>[e("div",He,[t(r,{onClick:o[16]||(o[16]=l=>Y()),style:{"background-color":"var(--primary-color)",border:"none","border-radius":".3rem"},label:"Guardar"})])]),default:a(()=>[e("div",Me,[e("div",Pe,[qe,t(ae,{modelValue:n.value.flavor_group_id,"onUpdate:modelValue":o[13]||(o[13]=l=>n.value.flavor_group_id=l),optionLabel:"name",optionValue:"id",options:z.value},null,8,["modelValue","options"]),Le,t(I,{modelValue:n.value.name,"onUpdate:modelValue":o[14]||(o[14]=l=>n.value.name=l),style:{width:"100%"}},null,8,["modelValue"]),Oe,t(M,{modelValue:n.value.price,"onUpdate:modelValue":o[15]||(o[15]=l=>n.value.price=l),prefix:"$ ",style:{width:"100%"}},null,8,["modelValue"])])])]),_:1},8,["visible"]),t(b,{visible:N.value,"onUpdate:visible":o[20]||(o[20]=l=>N.value=l),header:"Editar grupo",modal:"",style:{width:"30rem"}},{footer:a(()=>[e("div",We,[t(r,{onClick:o[19]||(o[19]=l=>ee()),style:{"background-color":"var(--primary-color)",border:"none","border-radius":".3rem"},label:"Guardar"})])]),default:a(()=>[e("div",Je,[e("div",Ke,[Qe,t(I,{modelValue:f.value.group_name,"onUpdate:modelValue":o[18]||(o[18]=l=>f.value.group_name=l),style:{width:"100%"}},null,8,["modelValue"])])])]),_:1},8,["visible"])],64)}}},ol=ie(Xe,[["__scopeId","data-v-465abe8e"]]);export{ol as default};
